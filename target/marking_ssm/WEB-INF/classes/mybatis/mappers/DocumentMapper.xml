<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ga.dqrjz.marking.mapper.DocumentMapper">
    <resultMap id="documentResultMap" type="Document" autoMapping="true">
        <id column="did" property="did"/>
        <association property="user" javaType="User" autoMapping="true">
            <id property="uid" column="uid"/>
        </association>
    </resultMap>
    <select id="selectAllDocuments" resultMap="documentResultMap">
        select
            did,
            filename_xml,
            document_marking_status,
            user_id,
            u.username,
            case_name,
            case_number,
            case_reason,
            case_category
        from document d left join user u
                on d.user_id = u.uid
        order by did asc
    </select>

    <!--<select id="selectMarkedDocuments" resultMap="documentResultMap">-->
        <!--select-->
            <!--did,-->
            <!--filename_xml,-->
            <!--document_marking_status,-->
            <!--user_id,-->
            <!--u.username,-->
            <!--case_name,-->
            <!--case_number,-->
            <!--case_reason,-->
            <!--case_category-->
        <!--from document d left join user u-->
                <!--on d.user_id = u.uid-->
        <!--where document_marking_status = 1-->
        <!--order by did asc-->
    <!--</select>-->
    <!--<select id="selectMarkedDocumentsByUserId" resultMap="documentResultMap">-->
        <!--select-->
            <!--did,-->
            <!--filename_xml,-->
            <!--document_marking_status,-->
            <!--user_id,-->
            <!--u.username,-->
            <!--case_name,-->
            <!--case_number,-->
            <!--case_reason,-->
            <!--case_category-->
        <!--from document d left join user u-->
                <!--on d.user_id = u.uid-->
        <!--where d.user_id = #{userId} and document_marking_status = 1-->
        <!--order by did asc-->
    <!--</select>-->

    <!--<select id="selectUnmarkedDocuments" resultMap="documentResultMap">-->
        <!--select-->
            <!--did,-->
            <!--filename_xml,-->
            <!--document_marking_status,-->
            <!--user_id,-->
            <!--u.username,-->
            <!--case_name,-->
            <!--case_number,-->
            <!--case_reason,-->
            <!--case_category-->
        <!--from document d left join user u-->
                <!--on d.user_id = u.uid-->
        <!--where document_marking_status = 0-->
        <!--order by did asc-->
    <!--</select>-->
    <!--<select id="selectUnmarkedDocumentsByUserId" resultMap="documentResultMap">-->
        <!--select-->
            <!--did,-->
            <!--filename_xml,-->
            <!--document_marking_status,-->
            <!--user_id,-->
            <!--u.username,-->
            <!--case_name,-->
            <!--case_number,-->
            <!--case_reason,-->
            <!--case_category-->
        <!--from document d left join user u-->
                <!--on d.user_id = u.uid-->
        <!--where d.user_id = #{userId} and document_marking_status = 0-->
        <!--order by did asc-->
    <!--</select>-->


    <!--<select id="selectAssignedDocuments" resultMap="documentResultMap">-->
        <!--select-->
            <!--did,-->
            <!--filename_xml,-->
            <!--document_marking_status,-->
            <!--user_id,-->
            <!--u.username,-->
            <!--case_name,-->
            <!--case_number,-->
            <!--case_reason,-->
            <!--case_category-->
        <!--from document d left join user u-->
                <!--on d.user_id = u.uid-->
        <!--where user_id != -1-->
        <!--order by did asc-->
    <!--</select>-->
    <!--<select id="selectAssignedDocumentsByUserId" resultMap="documentResultMap">-->
        <!--select-->
            <!--did,-->
            <!--filename_xml,-->
            <!--document_marking_status,-->
            <!--user_id,-->
            <!--u.username,-->
            <!--case_name,-->
            <!--case_number,-->
            <!--case_reason,-->
            <!--case_category-->
        <!--from document d left join user u-->
                <!--on d.user_id = u.uid-->
        <!--where user_id = #{userId}-->
        <!--order by did asc-->
    <!--</select>-->

    <select id="selectMarkedDocumentIds" resultType="Document">
        select did
        from document d
        where d.document_marking_status = 'Y'
        order by did
    </select>
    <select id="selectUnmarkedDocumentIds" resultType="Document">
        select did
        from document d
        where d.document_marking_status = 'N'
        order by did
    </select>

    <select id="selectMarkedDocumentIdsByUserId" resultType="Document">
        select did
        from document d
        where d.document_marking_status = 'Y' and d.user_id = #{userId}
        order by did
    </select>
    <select id="selectUnmarkedDocumentIdsByUserId" resultType="Document">
        select did
        from document d
        where d.document_marking_status = 'N' and d.user_id = #{userId}
        order by did
    </select>

    <!--<select id="selectDocumentsByUserId" resultMap="documentResultMap">-->
        <!--select-->
            <!--did,-->
            <!--filename_xml,-->
            <!--document_marking_status,-->
            <!--user_id,-->
            <!--u.username,-->
            <!--case_name,-->
            <!--case_number,-->
            <!--case_reason,-->
            <!--case_category-->
        <!--from document d left join user u-->
                <!--on d.user_id = u.uid-->
        <!--where user_id = #{userId}-->
        <!--order by did asc-->
    <!--</select>-->




</mapper>